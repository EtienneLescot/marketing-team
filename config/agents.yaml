# Global defaults
defaults:
  provider: "deepseek"
  model: "deepseek-chat"
  #provider: "openrouter"
  #model:"amazon/nova-2-lite-v1:free"

# Provider definitions
providers:
  openrouter:
    base_url: "https://openrouter.ai/api/"
    api_key_env: "OPENROUTER_API_KEY"
  deepseek:
    base_url: "https://api.deepseek.com"
    api_key_env: "DEEPSEEK_API_KEY"
  openai:
    base_url: null # Defaults to standard OpenAI URL
    api_key_env: "OPENAI_API_KEY"

# Agent configurations with dependencies
agents:
  # ============================================================================
  # Superviseur Principal (Niveau le plus élevé)
  # ============================================================================
  - name: "main_supervisor"
    role: "supervisor"
    # provider: "deepseek" # Inherits from defaults
    prompt_file: "supervisors/main.md"
    output_schema: "RouterResponse"
    headers:
      HTTP-Referer: "https://marketing-orchestrator.com"
      X-Title: "Marketing Main Supervisor"
    managed_agents:
      - "research_team_supervisor"
      - "content_team_supervisor"
      - "social_media_team_supervisor"

  # ============================================================================
  # Équipe de Recherche
  # ============================================================================
  - name: "research_team_supervisor"
    role: "supervisor"
    prompt_file: "supervisors/research.md"
    output_schema: "RouterResponse"
    headers:
      HTTP-Referer: "https://research-team.com"
      X-Title: "Research Team Supervisor"
    managed_agents:
      - "web_researcher"
      - "data_analyst"

  - name: "web_researcher"
    role: "worker"
    prompt_file: "workers/web_researcher.md"
    headers:
      HTTP-Referer: "https://web-researcher.com"
      X-Title: "Web Researcher Agent"
    tools:
      - "tavily_search"
    # No dependencies - first step in research

  - name: "data_analyst"
    role: "worker"
    prompt_file: "workers/data_analyst.md"
    headers:
      HTTP-Referer: "https://data-analyst.com"
      X-Title: "Data Analyst Agent"
    depends_on:
      - "web_researcher"  # Needs research data to analyze

  # ============================================================================
  # Équipe de Création de Contenu
  # ============================================================================
  - name: "content_team_supervisor"
    role: "supervisor"
    prompt_file: "supervisors/content.md"
    output_schema: "RouterResponse"
    headers:
      HTTP-Referer: "https://content-team.com"
      X-Title: "Content Team Supervisor"
    managed_agents:
      - "content_writer"
      - "seo_specialist"
      - "visual_designer"
    depends_on:
      - "research_team_supervisor"  # Content needs research data

  - name: "content_writer"
    role: "worker"
    prompt_file: "workers/content_writer.md"
    headers:
      HTTP-Referer: "https://content-writer.com"
      X-Title: "Content Writer Agent"
    depends_on:
      - "data_analyst"  # Write content based on analyzed data

  - name: "seo_specialist"
    role: "worker"
    prompt_file: "workers/seo_specialist.md"
    headers:
      HTTP-Referer: "https://seo-specialist.com"
      X-Title: "SEO Specialist Agent"
    depends_on:
      - "content_writer"  # Optimize content after it's written

  - name: "visual_designer"
    role: "worker"
    prompt_file: "workers/visual_designer.md"
    headers:
      HTTP-Referer: "https://visual-designer.com"
      X-Title: "Visual Designer Agent"
    depends_on:
      - "content_writer"  # Design visuals for the content

  # ============================================================================
  # Équipe des Médias Sociaux
  # ============================================================================
  - name: "social_media_team_supervisor"
    role: "supervisor"
    prompt_file: "supervisors/social_media.md"
    output_schema: "RouterResponse"
    headers:
      HTTP-Referer: "https://social-media-team.com"
      X-Title: "Social Media Team Supervisor"
    managed_agents:
      - "linkedin_manager"
      - "twitter_manager"
      - "analytics_tracker"
    depends_on:
      - "content_team_supervisor"  # Social media needs content

  - name: "linkedin_manager"
    role: "worker"
    prompt_file: "workers/linkedin_manager.md"
    headers:
      HTTP-Referer: "https://linkedin-manager.com"
      X-Title: "LinkedIn Manager Agent"
    require_approval: true
    tools:
      - "linkedin_post"
    depends_on:
      - "seo_specialist"  # Use SEO-optimized content
      - "visual_designer"  # Use designed visuals

  - name: "twitter_manager"
    role: "worker"
    prompt_file: "workers/twitter.md"
    headers:
      HTTP-Referer: "https://twitter-manager.com"
      X-Title: "Twitter Manager Agent"
    require_approval: true
    depends_on:
      - "seo_specialist"  # Use SEO-optimized content
      - "visual_designer"  # Use designed visuals

  - name: "analytics_tracker"
    role: "worker"
    prompt_file: "workers/analytics_tracker.md"
    headers:
      HTTP-Referer: "https://analytics-tracker.com"
      X-Title: "Analytics Tracker Agent"
    depends_on:
      - "linkedin_manager"  # Track after posting
      - "twitter_manager"   # Track after posting

  # ============================================================================
  # Agents de Support (Optionnels)
  # ============================================================================
  - name: "strategy_agent"
    role: "worker"
    prompt_file: "workers/strategy_agent.md"
    headers:
      HTTP-Referer: "https://strategy-agent.com"
      X-Title: "Strategy Agent"
    depends_on:
      - "analytics_tracker"  # Strategy based on analytics

  - name: "community_manager"
    role: "worker"
    prompt_file: "workers/community_manager.md"
    headers:
      HTTP-Referer: "https://community-manager.com"
      X-Title: "Community Manager Agent"
    depends_on:
      - "social_media_team_supervisor"  # Community management after social media